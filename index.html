<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>BrainMatch: Memory Challenge</title>

    <link rel="icon" type="image/png" href="./favicon/memory.png">

    <link rel="stylesheet" href="style.css">

    <script src="script.js"></script>

</head>
<body>
<div class="page-wrapper">
    <header class="page-header">
      <h2>Jermaine McKenna | BrainMatch</h2>
    </header>

    <div class="container">
      <h1>Memory Game</h1>
      <p id="timer-display">‚è± Time: <span id="timer">0</span>s</p>
      <div class="game"></div>

      <button class="reset" onclick="playResetSoundAndReload();">Reset Game</button>
      <button id="mute-btn">üîä Sound On</button>
    </div>

    <footer class="page-footer">
      <p>&copy; 2025 Jermaine McKenna. All rights reserved.</p>
      <p>
        <a href="https://github.com/JermaineMckenna" target="_blank">GitHub</a> |
        <a href="https://www.linkedin.com/in/JermaineMcKenna" target="_blank">LinkedIn</a>
      </p>
    </footer>
  </div>

  <script>
    const flipSound = new Audio('audio/flip.wav');
    const matchSound = new Audio('audio/match.wav');
    const resetSound = new Audio('audio/reset.wav');
    const winSound = new Audio('audio/win.wav');
    const wrongSound = new Audio('audio/wrong.wav');

    let soundMuted = false;
    document.getElementById('mute-btn').addEventListener('click', () => {
      soundMuted = !soundMuted;
      const allSounds = [flipSound, matchSound, resetSound, winSound, wrongSound];
      allSounds.forEach(sound => sound.muted = soundMuted);
      document.getElementById('mute-btn').textContent = soundMuted ? 'üîá Sound Off' : 'üîä Sound On';
    });

    function playResetSoundAndReload() {
      resetSound.currentTime = 0;
      resetSound.play();
      setTimeout(() => {
        window.location.reload();
      }, 300);
    }

    let timer;
    let time = 0;
    let hasStarted = false;

    function startTimer() {
      clearInterval(timer);
      time = 0;
      document.getElementById('timer').textContent = time;
      timer = setInterval(() => {
        time++;
        document.getElementById('timer').textContent = time;
      }, 1000);
    }

    const allEmojis = ["‚ò∫Ô∏è", "üòá", "üòç", "üôÉ", "üòé", "üëæ", "üò∏", "üêú", "üéÉ", "üëª", "üê∂", "üçï", "üöÄ", "ü¶Ñ", "üê∏"];
    let level = 1;

    function getEmojisForLevel(level) {
      const pairs = 2 + level * 2;
      return allEmojis.slice(0, pairs);
    }

    function createBoard(level) {
      const gameContainer = document.querySelector('.game');
      gameContainer.innerHTML = '';
      gameContainer.className = `game level-${level}`;

      hasStarted = false;
      time = 0;
      document.getElementById('timer').innerText = time;
      clearInterval(timer);

      const emojis = getEmojisForLevel(level);
      const gameEmojis = [...emojis, ...emojis];
      const shuffled = gameEmojis.sort(() => Math.random() - 0.5);

      for (let i = 0; i < shuffled.length; i++) {
        const box = document.createElement('div');
        box.className = 'item';
        box.innerHTML = shuffled[i];

        box.onclick = function () {
          if (this.classList.contains('boxOpen') || this.classList.contains('boxMatch')) return;

          if (!hasStarted) {
            startTimer();
            hasStarted = true;
          }

          flipSound.currentTime = 0;
          flipSound.play();
          this.classList.add('boxOpen');

          const openBoxes = document.querySelectorAll('.boxOpen');
          if (openBoxes.length === 2) {
            setTimeout(() => {
              if (openBoxes[0].innerHTML === openBoxes[1].innerHTML) {
                openBoxes[0].classList.add('boxMatch');
                openBoxes[1].classList.add('boxMatch');
                matchSound.currentTime = 0;
                matchSound.play();
              } else {
                wrongSound.currentTime = 0;
                wrongSound.play();
              }

              openBoxes[0].classList.remove('boxOpen');
              openBoxes[1].classList.remove('boxOpen');

              const matched = document.querySelectorAll('.boxMatch').length;
              if (matched === gameEmojis.length) {
                winSound.currentTime = 0;
                winSound.play();
                clearInterval(timer);

                setTimeout(() => {
                  if (level < 5) {
                    alert(`‚úÖ Level ${level} complete in ${time}s! Moving to Level ${level + 1}...`);
                    level++;
                    createBoard(level);
                  } else {
                    alert(`üéâ All levels complete! Final Time: ${time}s`);
                  }
                }, 600);
              }
            }, 500);
          }
        };

        gameContainer.appendChild(box);
      }
    }

    createBoard(level);
  </script>
</body>
</html>
